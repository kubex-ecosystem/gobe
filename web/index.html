<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoBE - Freedom, Engineered</title>
    <meta name="description" content="GoBE - Modular, secure, zero-config backend for modern Go applications. Independent by design. MCP enabled, Docker integrated, production ready.">
    <meta name="keywords" content="go, backend, modular, secure, mcp, kubex, zero-config, freedom, independent">
    <meta name="author" content="Kubex Ecosystem">
    <link rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🚀</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@500;600;700;800&family=Inter:wght@400;500;600;700&family=Orbitron:wght@500;600;700;800&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
      /* Inline critical styles for faster loading - Kubex Brand v0.0.2 */
      :root {
        --bg-base: #f9fafb;
        --bg-surface: #ffffff;
        --text-head: #111827;
        --text-body: #334155;
        --text-muted: #64748b;
        --primary-cyan: #06b6d4;
        --primary-cyan-hover: #0891b2;
        --accent-lilac: #a855f7;
        --border-muted: #e2e8f0;
        --glow-cyan: rgba(0, 136, 255, 0.08);
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
        --shadow-hover: 0 12px 24px rgba(6, 182, 212, 0.15);
        --gradient-hero: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: var(--bg-base);
        color: var(--text-body);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* Background Animation - Soft Hex Grid */
      .bg-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background: var(--gradient-hero);
        opacity: 0.05;
      }

      .bg-animation::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="hexgrid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(0,76,153,0.05)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23hexgrid)"/></svg>') repeat;
        animation: float 20s ease-in-out infinite;
      }

      @keyframes float {

        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }

        50% {
          transform: translateY(-20px) rotate(1deg);
        }
      }

      /* Header */
      .header {
        position: relative;
        padding: 2rem 1rem;
        text-align: center;
        background: var(--bg-surface);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--border-muted);
        box-shadow: var(--shadow-sm);
      }

      .logo {
        display: inline-flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .logo-icon {
        font-size: 3rem;
        animation: pulse-glow 3s ease-in-out infinite;
      }

      @keyframes pulse-glow {

        0%,
        100% {
          transform: scale(1);
          filter: drop-shadow(0 0 3px var(--glow-cyan));
        }

        50% {
          transform: scale(1.05);
          filter: drop-shadow(0 0 6px var(--glow-cyan));
        }
      }

      .logo h1 {
        font-size: 3rem;
        font-weight: 700;
        font-family: 'Exo 2', 'Orbitron', sans-serif;
        background: var(--gradient-hero);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        letter-spacing: -0.02em;
      }

      .tagline {
        font-size: 1.25rem;
        color: var(--text-head);
        margin-bottom: 0.5rem;
        font-weight: 600;
      }

      .subtitle {
        font-size: 1.1rem;
        color: var(--primary-cyan);
        font-weight: 500;
      }

      /* Status Section */
      .status-section {
        padding: 2rem 1rem;
        text-align: center;
        background: var(--bg-surface);
        margin: 2rem 0;
        border-radius: 20px;
        border: 1px solid var(--border-muted);
        box-shadow: var(--shadow-sm);
      }

      .status-indicator {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem 2rem;
        background: rgba(6, 182, 212, 0.08);
        border: 2px solid var(--primary-cyan);
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-head);
      }

      .status-dot {
        width: 12px;
        height: 12px;
        background: var(--primary-cyan);
        border-radius: 50%;
        animation: pulse 2s infinite;
        box-shadow: 0 0 6px var(--glow-cyan);
      }

      @keyframes pulse {

        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }

        50% {
          opacity: 0.7;
          transform: scale(1.2);
        }
      }

      /* Dashboard Grid */
      .dashboard {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        padding: 2rem 1rem;
        max-width: 1200px;
        margin: 0 auto;
      }

      .card {
        background: var(--bg-surface);
        padding: 2rem;
        border-radius: 16px;
        border: 1px solid var(--border-muted);
        box-shadow: var(--shadow-sm);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-hero);
        transform: scaleX(0);
        transition: transform 0.3s ease;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-hover);
        border-color: var(--primary-cyan);
      }

      .card:hover::before {
        transform: scaleX(1);
      }

      .card-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        display: block;
      }

      .card h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        font-family: 'Exo 2', sans-serif;
        background: var(--gradient-hero);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .card p {
        color: var(--text-muted);
        margin-bottom: 1.5rem;
        line-height: 1.7;
      }

      /* API Endpoints */
      .endpoint {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.75rem;
        background: rgba(6, 182, 212, 0.05);
        border-radius: 8px;
        margin-bottom: 0.5rem;
        font-family: 'IBM Plex Mono', 'JetBrains Mono', monospace;
        font-size: 0.9rem;
        transition: all 0.2s ease;
        border: 1px solid var(--border-muted);
      }

      .endpoint:hover {
        background: rgba(6, 182, 212, 0.1);
        transform: translateX(5px);
        border-color: var(--primary-cyan);
      }

      .method {
        padding: 0.25rem 0.75rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.8rem;
        min-width: 60px;
        text-align: center;
      }

      .method.get {
        background: #22c55e;
        color: white;
      }

      .method.post {
        background: #3b82f6;
        color: white;
      }

      .method.put {
        background: #f59e0b;
        color: white;
      }

      .method.delete {
        background: #ef4444;
        color: white;
      }

      /* Action Buttons */
      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        padding: 2rem 1rem;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 1rem 2rem;
        background: var(--gradient-hero);
        color: white;
        text-decoration: none;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-hover);
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn.secondary {
        background: transparent;
        border: 2px solid var(--border-muted);
        color: var(--text-head);
      }

      .btn.secondary:hover {
        border-color: var(--primary-cyan);
        background: rgba(6, 182, 212, 0.05);
        box-shadow: 0 0 20px rgba(6, 182, 212, 0.15);
      }

      /* Footer */
      .footer {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--text-muted);
        border-top: 1px solid var(--border-muted);
        background: var(--bg-surface);
      }

      .footer .kubex-branding {
        font-weight: 700;
        color: var(--primary-cyan);
        font-family: 'Exo 2', sans-serif;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .logo h1 {
          font-size: 2rem;
        }

        .tagline {
          font-size: 1rem;
        }

        .dashboard {
          grid-template-columns: 1fr;
          padding: 1rem;
        }

        .card {
          padding: 1.5rem;
        }

        .actions {
          flex-direction: column;
          align-items: center;
        }

        .btn {
          width: 100%;
          max-width: 300px;
          justify-content: center;
        }
      }

      /* Loading Animation */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--accent-color);
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Toast Notifications */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        background: var(--bg-surface);
        border: 1px solid var(--border-muted);
        border-radius: 12px;
        backdrop-filter: blur(20px);
        transform: translateX(400px);
        transition: transform 0.3s ease;
        z-index: 1000;
        box-shadow: var(--shadow-lg);
      }

      .toast.show {
        transform: translateX(0);
      }

      .toast.success {
        border-left: 4px solid var(--primary-cyan);
      }

      /* Dark Mode Parity (Optional) - Kubex Brand v0.0.2 */
      @media (prefers-color-scheme: dark) {
        :root {
          /* Dark mode tokens with same spacing and geometry */
          --bg-base: #0a0f14;
          --bg-surface: #0f1419;
          --text-head: #e5f2f2;
          --text-body: #cbd5e1;
          --text-muted: #94a3b8;
          --border-muted: #1e293b;
          --glow-cyan: rgba(0, 136, 255, 0.15);
          --glow-lilac: rgba(124, 77, 255, 0.15);
        }

        .bg-animation {
          opacity: 0.15;
        }

        .endpoint {
          background: rgba(6, 182, 212, 0.1);
        }

        .endpoint:hover {
          background: rgba(6, 182, 212, 0.2);
        }

        .card {
          background: var(--bg-surface);
          border: 1px solid var(--border-muted);
        }

        .header {
          background: var(--bg-surface);
          border-bottom: 1px solid var(--border-muted);
        }

        .status-section {
          background: var(--bg-surface);
          border: 1px solid var(--border-muted);
        }

        .footer {
          background: var(--bg-surface);
          border-top: 1px solid var(--border-muted);
        }
      }

      /* Respect reduced motion preference - Accessibility */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>
  </head>

  <body>
    <div class="bg-animation"></div>

    <header class="header">
      <div class="logo">
        <span class="logo-icon">🚀</span>
        <h1>GoBE</h1>
      </div>
      <p class="tagline">Freedom, Engineered.</p>
      <p class="subtitle">Independent by Design • No Artificial Borders</p>
    </header>

    <section class="status-section">
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span id="status-text">System Operational</span>
      </div>
      <p>Server running on <strong>http://localhost:3666</strong> • Uptime: <span id="uptime">Loading...</span></p>
    </section>

    <main class="dashboard">
      <!-- System Status Card -->
      <div class="card">
        <span class="card-icon">📊</span>
        <h3>System Status</h3>
        <p>Real-time system metrics and health monitoring.</p>
        <div id="system-metrics">
          <div style="margin-bottom: 1rem;">
            <strong>Version:</strong> <span id="version">v1.3.4</span><br>
            <strong>Go Version:</strong> <span id="go-version">Loading...</span><br>
            <strong>Memory:</strong> <span id="memory">Loading...</span><br>
            <strong>Goroutines:</strong> <span id="goroutines">Loading...</span>
          </div>
        </div>
        <button class="btn secondary" onclick="refreshSystemStatus()">
          🔄 Refresh Status
        </button>
      </div>

      <!-- MCP Tools Card -->
      <div class="card">
        <span class="card-icon">🤖</span>
        <h3>MCP Protocol</h3>
        <p>Model Context Protocol for AI tool integration with dynamic registry.</p>
        <div id="mcp-tools">
          <div class="endpoint">
            <span class="method get">GET</span>
            <span>/mcp/tools</span>
          </div>
          <div class="endpoint">
            <span class="method post">POST</span>
            <span>/mcp/exec</span>
          </div>
        </div>
        <button class="btn secondary" onclick="testMCPTools()">
          🧪 Test MCP Tools
        </button>
      </div>

      <!-- API Endpoints Card -->
      <div class="card">
        <span class="card-icon">🌐</span>
        <h3>REST API</h3>
        <p>Comprehensive REST endpoints for authentication, users, products, and more.</p>
        <div style="max-height: 200px; overflow-y: auto;">
          <div class="endpoint">
            <span class="method get">GET</span>
            <span>/health</span>
          </div>
          <div class="endpoint">
            <span class="method post">POST</span>
            <span>/api/v1/auth/login</span>
          </div>
          <div class="endpoint">
            <span class="method get">GET</span>
            <span>/api/v1/users</span>
          </div>
          <div class="endpoint">
            <span class="method get">GET</span>
            <span>/api/v1/products</span>
          </div>
          <div class="endpoint">
            <span class="method post">POST</span>
            <span>/api/v1/webhooks</span>
          </div>
        </div>
        <button class="btn secondary" onclick="openAPIDoc()">
          📖 View API Docs
        </button>
      </div>

      <!-- Database Integration Card -->
      <div class="card">
        <span class="card-icon">🗄️</span>
        <h3>Database</h3>
        <p>PostgreSQL/SQLite integration via gdbase with auto-setup and Docker management.</p>
        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
          <strong>Connection:</strong> <span id="db-status" style="color: var(--accent-color);">Connected ✓</span><br>
          <strong>Type:</strong> <span id="db-type">PostgreSQL</span><br>
          <strong>Tables:</strong> <span id="db-tables">Loading...</span>
        </div>
        <button class="btn secondary" onclick="checkDatabase()">
          🔍 Check Database
        </button>
      </div>

      <!-- Security Features Card -->
      <div class="card">
        <span class="card-icon">🔒</span>
        <h3>Security</h3>
        <p>Auto-generated certificates, JWT authentication, keyring storage, and rate limiting.</p>
        <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
          <strong>TLS:</strong> <span style="color: var(--accent-color);">Enabled ✓</span><br>
          <strong>JWT:</strong> <span style="color: var(--accent-color);">Active ✓</span><br>
          <strong>Rate Limiting:</strong> <span style="color: var(--accent-color);">Active ✓</span><br>
          <strong>CORS:</strong> <span style="color: var(--accent-color);">Configured ✓</span>
        </div>
        <button class="btn secondary" onclick="viewSecurityInfo()">
          🛡️ Security Details
        </button>
      </div>

      <!-- Integrations Card -->
      <div class="card">
        <span class="card-icon">🔗</span>
        <h3>Integrations</h3>
        <p>WhatsApp, Telegram, Discord bots, RabbitMQ messaging, and webhook support.</p>
        <div id="integrations-status">
          <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
            <span>WhatsApp Bot:</span>
            <span id="whatsapp-status" style="color: var(--text-secondary);">Checking...</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
            <span>Telegram Bot:</span>
            <span id="telegram-status" style="color: var(--text-secondary);">Checking...</span>
          </div>
          <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
            <span>RabbitMQ:</span>
            <span id="rabbitmq-status" style="color: var(--text-secondary);">Checking...</span>
          </div>
        </div>
        <button class="btn secondary" onclick="testIntegrations()">
          🧪 Test Integrations
        </button>
      </div>
    </main>

    <section class="actions">
      <button class="btn" onclick="window.open('/health', '_blank')">
        💚 Health Check
      </button>
      <button class="btn" onclick="testSystemStatus()">
        🧪 Test System.Status
      </button>
      <button class="btn" onclick="runSystemTest()">
        🎯 Run Full Test
      </button>
      <button class="btn secondary" onclick="viewLogs()">
        📋 View Logs
      </button>
      <button class="btn secondary" onclick="downloadConfig()">
        ⚙️ Download Config
      </button>
      <a href="https://github.com/kubex-ecosystem/gobe" target="_blank" class="btn secondary" rel="noopener noreferrer">
        📖 Documentation
      </a>
    </section>

    <footer class="footer">
      <span class="kubex-badge" style="margin-bottom: 1rem;">
        <span class="kubex-badge-icon">🚀</span>
        Powered by Kubex
      </span>
      <p><strong class="kubex-branding">Kubex Ecosystem</strong> • Freedom, Engineered</p>
      <p>Independent by Design • Interoperability is our diplomacy</p>
      <p style="margin-top: 0.5rem; font-size: 0.9rem;">Built with Go • Version 1.3.5 • <a href="https://github.com/kubex-ecosystem/gobe" target="_blank" rel="noopener noreferrer" style="color: var(--primary-cyan); text-decoration: none;">Open Source</a></p>
    </footer>

    <script src="app.js" type="module"></script>
    <script>
      // Performance monitoring
      window.addEventListener('load', function () {
        if ('performance' in window) {
          const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
          console.log(`🚀 Page loaded in ${loadTime}ms`);
        }
      });

      // Service Worker registration for caching (optional)
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
          navigator.serviceWorker.register('/sw.js')
            .then(function (registration) {
              console.log('📦 SW registered with scope:', registration.scope);
            })
            .catch(function (error) {
              console.log('📦 SW registration failed:', error);
            });
        });
      }
    </script>
  </body>

</html>
